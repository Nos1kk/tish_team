<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TISH TEAM ‚Äî Admin Panel</title>
    <link rel="icon" type="image/png" sizes="32x32" href="favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/admin.css">
    <link rel="stylesheet" href="css/dark-admin.css">
    <style>
        /* Bug #1 fix: spin animation */
        .spin-icon { animation: adminSpin 1s linear infinite; }
        @keyframes adminSpin { to { transform: rotate(360deg); } }
        /* Drag visual */
        .works-edit-item[draggable="true"] { transition: opacity 0.2s, border-top 0.2s; }
        .works-edit-item.drag-over { border-top: 3px solid #a855f7 !important; }
        /* Unsaved indicator */
        .topbar__unsaved { display: none; padding: 4px 12px; background: rgba(245,158,11,0.1); border: 1px solid rgba(245,158,11,0.3); border-radius: 100px; font-size: 0.7rem; font-weight: 600; color: #f59e0b; animation: unsavedPulse 2s ease-in-out infinite; }
        .topbar__unsaved.visible { display: flex; align-items: center; gap: 4px; }
        @keyframes unsavedPulse { 0%,100% { opacity: 1; } 50% { opacity: 0.5; } }
        /* Search input */
        .portfolio-search { display: flex; gap: 8px; margin-bottom: 16px; }
        .portfolio-search input { flex: 1; }
        /* Import button */
        .import-area { display: none; margin-top: 12px; padding: 16px; border: 2px dashed rgba(139,92,246,0.2); border-radius: 12px; text-align: center; }
        .import-area.visible { display: block; }
        /* Preview iframe */
        .preview-frame { width: 100%; height: 500px; border: 1px solid rgba(139,92,246,0.1); border-radius: 12px; background: white; }
        /* Data stats */
        .data-stats { display: flex; gap: 12px; flex-wrap: wrap; margin-top: 12px; }
        .data-stat { padding: 8px 16px; background: rgba(139,92,246,0.04); border: 1px solid rgba(139,92,246,0.1); border-radius: 10px; font-size: 0.8rem; color: #6b7280; }
        .data-stat strong { color: #7c3aed; }
        /* Last saved */
        .topbar__last-saved { font-size: 0.7rem; color: #9ca3af; margin-top: 2px; }
        /* Category icon selector */
        .icon-selector { display: flex; gap: 6px; flex-wrap: wrap; margin-top: 8px; }
        .icon-option { width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; border: 2px solid rgba(139,92,246,0.1); border-radius: 8px; cursor: pointer; transition: all 0.2s; font-size: 1.1rem; }
        .icon-option:hover { border-color: #a855f7; background: rgba(139,92,246,0.05); }
        .icon-option.active { border-color: #a855f7; background: rgba(139,92,246,0.1); }
    </style>
</head>
<body class="admin-body">

    <!-- Animated Background -->
    <div class="admin-bg">
        <div class="admin-bg__orb admin-bg__orb--1"></div>
        <div class="admin-bg__orb admin-bg__orb--2"></div>
        <div class="admin-bg__orb admin-bg__orb--3"></div>
        <div class="admin-bg__grid"></div>
        <div class="admin-bg__particles">
            <div class="admin-particle"></div><div class="admin-particle"></div>
            <div class="admin-particle"></div><div class="admin-particle"></div>
            <div class="admin-particle"></div><div class="admin-particle"></div>
            <div class="admin-particle"></div><div class="admin-particle"></div>
        </div>
    </div>

    <div class="toast-container" id="toast-container"></div>

    <!-- LOGIN -->
    <div class="login-screen" id="login-screen">
        <div class="admin-bg">
            <div class="admin-bg__orb admin-bg__orb--1"></div>
            <div class="admin-bg__orb admin-bg__orb--2"></div>
            <div class="admin-bg__grid"></div>
            <div class="admin-bg__particles">
                <div class="admin-particle"></div><div class="admin-particle"></div>
                <div class="admin-particle"></div><div class="admin-particle"></div>
                <div class="admin-particle"></div>
            </div>
        </div>
        <div class="login-card">
            <div class="login-logo">
                <div class="login-logo__icon">Ti</div>
                <div class="login-logo__title">TISH TEAM</div>
                <div class="login-logo__subtitle">Admin Panel</div>
            </div>
            <form class="login-form" id="login-form">
                <div class="admin-form-group">
                    <label class="admin-label">–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" class="admin-input" id="login-password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" autocomplete="current-password">
                    <button type="button" class="toggle-password-btn" id="toggle-password">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                    </button>
                </div>
                <div class="login-error" id="login-error">‚ö†Ô∏è –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å</div>
                <button type="submit" class="login-btn" id="login-btn">
                    <span>–í–æ–π—Ç–∏ –≤ –ø–∞–Ω–µ–ª—å</span>
                    <div class="login-btn__loading"><div class="spinner"></div></div>
                </button>
            </form>
            <div class="login-footer"><a href="index.html">‚Üê –ù–∞ —Å–∞–π—Ç</a></div>
        </div>
    </div>

    <!-- ADMIN LAYOUT -->
    <div class="admin-layout" id="admin-layout">
        <aside class="sidebar" id="sidebar">
            <div class="sidebar__header">
                <div class="sidebar__logo">Ti</div>
                <div style="display:flex;flex-direction:column;">
                    <span class="sidebar__brand-name">TISH TEAM</span>
                    <span class="sidebar__brand-sub">Admin Panel</span>
                </div>
            </div>
            <nav class="sidebar__nav">
                <div class="sidebar__section">
                    <div class="sidebar__section-title">–û—Å–Ω–æ–≤–Ω–æ–µ</div>
                    <button class="sidebar__link active" data-page="dashboard">
                        <svg class="sidebar__link-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>
                        –î–∞—à–±–æ—Ä–¥
                    </button>
                    <button class="sidebar__link" data-page="team">
                        <svg class="sidebar__link-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                        –ö–æ–º–∞–Ω–¥–∞ <span class="sidebar__link-badge" id="badge-team">3</span>
                    </button>
                    <button class="sidebar__link" data-page="works">
                        <svg class="sidebar__link-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
                        –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ <span class="sidebar__link-badge" id="badge-works">6</span>
                    </button>
                    <button class="sidebar__link" data-page="portfolio">
                        <svg class="sidebar__link-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
                        –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ <span class="sidebar__link-badge" id="badge-photos">0</span>
                    </button>
                </div>
                <div class="sidebar__section">
                    <div class="sidebar__section-title">–ö–æ–Ω—Ç–µ–Ω—Ç</div>
                    <button class="sidebar__link" data-page="hero">
                        <svg class="sidebar__link-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
                        Hero —Å–µ–∫—Ü–∏—è
                    </button>
                    <button class="sidebar__link" data-page="preview">
                        <svg class="sidebar__link-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                        –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
                    </button>
                </div>
                <div class="sidebar__section">
                    <div class="sidebar__section-title">–°–∏—Å—Ç–µ–º–∞</div>
                    <button class="sidebar__link" data-page="settings">
                        <svg class="sidebar__link-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9c.26.604.852.997 1.51 1H21a2 2 0 0 1 0 4h-.09c-.658.003-1.25.396-1.51 1z"/></svg>
                        –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                    </button>
                </div>
            </nav>
            <div class="sidebar__footer">
                <div class="sidebar__user">
                    <div class="sidebar__user-avatar">A</div>
                    <div class="sidebar__user-info">
                        <div class="sidebar__user-name">Admin</div>
                        <div class="sidebar__user-role">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</div>
                    </div>
                    <button class="sidebar__logout" id="logout-btn" title="–í—ã–π—Ç–∏">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                    </button>
                </div>
            </div>
        </aside>

        <main class="admin-main">
            <div class="topbar">
                <div class="topbar__left">
                    <button class="topbar__burger" id="burger-btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
                    </button>
                    <div>
                        <h1 class="topbar__title" id="topbar-title">–î–∞—à–±–æ—Ä–¥</h1>
                        <div class="topbar__breadcrumb" id="topbar-breadcrumb">–ì–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å</div>
                        <div class="topbar__last-saved" id="topbar-last-saved"></div>
                    </div>
                </div>
                <div class="topbar__right">
                    <div class="topbar__unsaved" id="topbar-unsaved">‚ö† –ù–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ</div>
                    <div class="topbar__status"><span class="topbar__status-dot"></span>Live</div>
                    <button class="admin-theme-toggle" title="–¢–µ–º–∞">üåô –¢–µ–º–∞</button>
                    <a href="index.html" target="_blank" class="topbar__btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
                        <span>–°–∞–π—Ç</span>
                    </a>
                    <button class="topbar__btn topbar__btn--primary" id="save-all-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
                        <span>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</span>
                    </button>
                </div>
            </div>

            <div class="content-area">
                <!-- DASHBOARD -->
                <div class="admin-page active" id="page-dashboard">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-card__header"><div class="stat-card__icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg></div></div>
                            <div class="stat-card__value" id="stat-works">6</div>
                            <div class="stat-card__label">–ö–∞—Ç–µ–≥–æ—Ä–∏–π</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card__header"><div class="stat-card__icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg></div></div>
                            <div class="stat-card__value" id="stat-photos">0</div>
                            <div class="stat-card__label">–§–∞–π–ª–æ–≤</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card__header"><div class="stat-card__icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/></svg></div></div>
                            <div class="stat-card__value" id="stat-team">3</div>
                            <div class="stat-card__label">–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card__header"><div class="stat-card__icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg></div><span class="stat-card__change stat-card__change--up">Live</span></div>
                            <div class="stat-card__value" id="stat-changes">0</div>
                            <div class="stat-card__label">–ò–∑–º–µ–Ω–µ–Ω–∏–π</div>  
                        </div>
                        <div class="stat-card">
                            <div class="stat-card__header">
                                <div class="stat-card__icon">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                                        <polyline points="3.27 6.96 12 12.01 20.73 6.96"/>
                                        <line x1="12" y1="22.08" x2="12" y2="12"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="stat-card__value" id="stat-storage">‚Äî</div>
                            <div class="stat-card__label">–•—Ä–∞–Ω–∏–ª–∏—â–µ</div>
                            <div style="font-size:0.7rem;color:#9ca3af;margin-top:4px;" id="storage-detail"></div>
                        </div>
                    </div>
                    <div class="activity-card">
                        <div class="activity-card__header">
                            <h3 class="activity-card__title">üìã –õ–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π</h3>
                            <button class="activity-card__clear" id="clear-log-btn">–û—á–∏—Å—Ç–∏—Ç—å</button>
                        </div>
                        <div class="activity-list" id="activity-list"><div class="activity-empty">–ü–æ–∫–∞ –Ω–µ—Ç –¥–µ–π—Å—Ç–≤–∏–π</div></div>
                    </div>
                    <!-- Quick Preview -->
                    <div class="activity-card" style="margin-top:20px;">
                        <div class="activity-card__header">
                            <h3 class="activity-card__title">üëÅ –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</h3>
                            <button class="activity-card__clear" onclick="document.getElementById('dash-preview').src='index.html?t='+Date.now()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                        </div>
                        <div style="padding:16px;">
                            <iframe id="dash-preview" src="index.html" style="width:100%;height:300px;border:1px solid rgba(139,92,246,0.1);border-radius:12px;background:white;"></iframe>
                        </div>
                    </div>
                </div>
                <!-- TEAM -->
                <div class="admin-page" id="page-team">
                    <div class="admin-section">
                        <div class="admin-section__header">
                            <h2 class="admin-section__title">üë• –ö–æ–º–∞–Ω–¥–∞</h2>
                            <button class="admin-btn admin-btn--primary" id="add-member-btn">+ –î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞</button>
                        </div>
                    </div>
                    <div class="team-edit-grid" id="team-edit-grid"></div>
                </div>

                <!-- WORKS -->
                <div class="admin-page" id="page-works">
                    <div class="admin-section">
                        <div class="admin-section__header">
                            <h2 class="admin-section__title">üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞–±–æ—Ç</h2>
                            <button class="admin-btn admin-btn--primary" id="add-category-btn">+ –ö–∞—Ç–µ–≥–æ—Ä–∏—è</button>
                        </div>
                        <p style="font-size:0.85rem;color:#9ca3af;margin-top:-12px;">–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–π—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ ‚¨Ü‚¨á</p>
                    </div>
                    <div class="works-edit-list" id="works-edit-list"></div>
                </div>

                <!-- PORTFOLIO -->
                <div class="admin-page" id="page-portfolio">
                    <div class="admin-section">
                        <div class="admin-section__header">
                            <h2 class="admin-section__title">üñº –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ</h2>
                            <p style="color:#6b7280;font-size:0.85rem;">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏ —É–ø—Ä–∞–≤–ª—è–π—Ç–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏</p>
                        </div>
                    </div>
                    <div class="portfolio-categories" id="portfolio-categories"></div>
                    <div class="portfolio-search" id="portfolio-search" style="display:none;">
                        <input class="admin-input" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é..." id="portfolio-search-input" >
                    </div>
                    <div class="portfolio-workspace" id="portfolio-workspace">
                        <div class="portfolio-empty">
                            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#d8b4fe" stroke-width="1"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
                            <p>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –≤—ã—à–µ</p>
                        </div>
                    </div>
                </div>

                <!-- HERO -->
                <div class="admin-page" id="page-hero">
                    <div class="admin-section"><div class="admin-section__header"><h2 class="admin-section__title">‚≠ê Hero —Å–µ–∫—Ü–∏—è</h2></div></div>
                    <div id="hero-editor"></div>
                </div>

                <!-- PREVIEW -->
                <div class="admin-page" id="page-preview">
                    <div class="admin-section">
                        <div class="admin-section__header">
                            <h2 class="admin-section__title">üëÅ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–∞–π—Ç–∞</h2>
                            <button class="admin-btn" onclick="document.getElementById('preview-iframe').src='index.html?t='+Date.now()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                        </div>
                    </div>
                    <iframe id="preview-iframe" src="index.html" class="preview-frame"></iframe>
                </div>

                <!-- SETTINGS -->
                <div class="admin-page" id="page-settings">
                    <div class="admin-section"><div class="admin-section__header"><h2 class="admin-section__title">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2></div></div>
                    <div id="settings-editor"></div>
                </div>
            </div>
        </main>
    </div>

    <!-- ADD PHOTO MODAL -->
    <div class="admin-modal" id="photo-modal">
        <div class="admin-modal__backdrop" onclick="AdminApp.closeModal('photo-modal')"></div>
        <div class="admin-modal__container">
            <div class="admin-modal__header">
                <h3 class="admin-modal__title">üì∏ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç</h3>
                <button class="admin-modal__close" onclick="AdminApp.closeModal('photo-modal')">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                </button>
            </div>
            <div class="admin-modal__body">
                <div class="admin-form-group">
                    <label class="admin-label">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã (–º–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ)</label>
                    <div class="photo-upload" id="modal-photo-upload">
                        <div class="photo-upload__preview" id="modal-photo-preview">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
                        </div>
                        <div class="photo-upload__text">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏–ª–∏ <strong>–Ω–∞–∂–º–∏—Ç–µ</strong> (—Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ)</div>
                        <input type="file" accept="image/*,video/*" id="modal-file-input" multiple>
                    </div>
                    <div id="modal-extra-previews" style="display:flex;gap:8px;flex-wrap:wrap;margin-top:8px;"></div>
                </div>
                <div class="admin-form-group">
                    <label class="admin-label">–ò–ª–∏ URL (–¥–ª—è –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞)</label>
                    <input type="url" class="admin-input" id="modal-url-input" placeholder="https://...">
                </div>
                <div class="admin-form-group">
                    <label class="admin-label">–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞</label>
                    <input class="admin-input" id="modal-photo-name" placeholder="–õ–æ–≥–æ—Ç–∏–ø –¥–ª—è...">
                </div>
                <div class="admin-form-group">
                    <label class="admin-label">–ê–≤—Ç–æ—Ä</label>
                    <select class="admin-select" id="modal-photo-author"><option value="">‚Äî –ù–µ —É–∫–∞–∑–∞–Ω ‚Äî</option></select>
                </div>
                <div class="admin-form-group">
                    <label class="admin-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea class="admin-textarea" id="modal-photo-desc" placeholder="–û –ø—Ä–æ–µ–∫—Ç–µ..."></textarea>
                </div>
                <div class="admin-form-group">
                    <label class="admin-label">–§–æ—Ä–º–∞—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</label>
                    <select class="admin-select" id="modal-photo-format">
                        <option value="auto">üìê –ê–≤—Ç–æ</option>
                        <option value="square">‚¨ú –ö–≤–∞–¥—Ä–∞—Ç 1:1</option>
                        <option value="landscape">üñº –ê–ª—å–±–æ–º–Ω–∞—è 16:9</option>
                        <option value="portrait">üì± –ü–æ—Ä—Ç—Ä–µ—Ç 9:16</option>
                        <option value="wide">üñ• –®–∏—Ä–æ–∫–∞—è 21:9</option>
                    </select>
                </div>
            </div>
            <div class="admin-modal__footer">
                <button class="admin-btn" onclick="AdminApp.closeModal('photo-modal')">–û—Ç–º–µ–Ω–∞</button>
                <button class="admin-btn admin-btn--primary" id="modal-photo-save">üì∏ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç</button>
            </div>
        </div>
    </div>

    <!-- PHOTO EDITOR MODAL -->
    <div class="admin-modal" id="edit-photo-modal">
        <div class="admin-modal__backdrop" onclick="AdminApp.closeModal('edit-photo-modal')"></div>
        <div class="admin-modal__container" style="max-width:850px;">
            <div class="admin-modal__header">
                <h3 class="admin-modal__title">üé® –†–µ–¥–∞–∫—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞</h3>
                <button class="admin-modal__close" onclick="AdminApp.closeModal('edit-photo-modal')">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                </button>
            </div>
            <div class="admin-modal__body" style="padding:0;">
                <!-- Canvas -->
                <div class="pe-canvas-area">
                    <div class="pe-canvas-wrap" id="pe-canvas-wrap">
                        <canvas id="pe-canvas"></canvas>
                        <div class="pe-crop-overlay" id="pe-crop-overlay" style="display:none;">
                            <div class="pe-crop-box" id="pe-crop-box">
                                <div class="pe-crop-handle pe-crop-handle--nw" data-handle="nw"></div>
                                <div class="pe-crop-handle pe-crop-handle--ne" data-handle="ne"></div>
                                <div class="pe-crop-handle pe-crop-handle--sw" data-handle="sw"></div>
                                <div class="pe-crop-handle pe-crop-handle--se" data-handle="se"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Toolbar -->
                <div class="pe-toolbar">
                    <div class="pe-toolbar__group">
                        <button class="pe-tool" onclick="photoEditor.toggleCrop()" id="pe-crop-btn" title="–û–±—Ä–µ–∑–∫–∞">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6.13 1L6 16a2 2 0 0 0 2 2h15"/><path d="M1 6.13L16 6a2 2 0 0 1 2 2v15"/></svg> –û–±—Ä–µ–∑–∫–∞
                        </button>
                        <button class="pe-tool" onclick="photoEditor.rotate(-90)">‚Ü∂ 90¬∞</button>
                        <button class="pe-tool" onclick="photoEditor.rotate(90)">‚Ü∑ 90¬∞</button>
                        <button class="pe-tool" onclick="photoEditor.flip('h')">‚Üî –ì–æ—Ä–∏–∑</button>
                        <button class="pe-tool" onclick="photoEditor.flip('v')">‚Üï –í–µ—Ä—Ç</button>
                    </div>
                    <div class="pe-toolbar__group">
                        <button class="pe-tool pe-tool--filter" onclick="photoEditor.applyFilter('none')">–ù–µ—Ç</button>
                        <button class="pe-tool pe-tool--filter" onclick="photoEditor.applyFilter('grayscale')">–ß/–ë</button>
                        <button class="pe-tool pe-tool--filter" onclick="photoEditor.applyFilter('sepia')">–°–µ–ø–∏—è</button>
                        <button class="pe-tool pe-tool--filter" onclick="photoEditor.applyFilter('warm')">–¢—ë–ø–ª—ã–π</button>
                        <button class="pe-tool pe-tool--filter" onclick="photoEditor.applyFilter('cool')">–•–æ–ª–æ–¥</button>
                        <button class="pe-tool pe-tool--filter" onclick="photoEditor.applyFilter('vintage')">–í–∏–Ω—Ç–∞–∂</button>
                    </div>
                    <button class="pe-tool pe-tool--reset" onclick="photoEditor.reset()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg> –°–±—Ä–æ—Å
                    </button>
                </div>
                <!-- Sliders -->
                <div class="pe-sliders">
                    <div class="pe-slider">
                        <label>‚òÄÔ∏è –Ø—Ä–∫–æ—Å—Ç—å <span id="pe-brightness-val">100%</span></label>
                        <input type="range" min="20" max="200" value="100" id="pe-brightness" oninput="photoEditor.updateFilters()">
                    </div>
                    <div class="pe-slider">
                        <label>üî≤ –ö–æ–Ω—Ç—Ä–∞—Å—Ç <span id="pe-contrast-val">100%</span></label>
                        <input type="range" min="20" max="200" value="100" id="pe-contrast" oninput="photoEditor.updateFilters()">
                    </div>
                    <div class="pe-slider">
                        <label>üé® –ù–∞—Å—ã—â–µ–Ω–Ω–æ—Å—Ç—å <span id="pe-saturate-val">100%</span></label>
                        <input type="range" min="0" max="200" value="100" id="pe-saturate" oninput="photoEditor.updateFilters()">
                    </div>
                    <div class="pe-slider">
                        <label>üíß –†–∞–∑–º—ã—Ç–∏–µ <span id="pe-blur-val">0px</span></label>
                        <input type="range" min="0" max="10" value="0" step="0.5" id="pe-blur" oninput="photoEditor.updateFilters()">
                    </div>
                </div>
                <!-- Info -->
                <div style="padding:20px 24px;">
                    <div class="form-row">
                        <div class="form-field"><label class="form-field__label">–ù–∞–∑–≤–∞–Ω–∏–µ</label><input class="admin-input" id="pe-photo-name"></div>
                        <div class="form-field"><label class="form-field__label">–ê–≤—Ç–æ—Ä</label><select class="admin-select" id="pe-photo-author"><option value="">‚Äî</option></select></div>
                    </div>
                    <div class="form-row">
                        <div class="form-field"><label class="form-field__label">–û–ø–∏—Å–∞–Ω–∏–µ</label><textarea class="admin-textarea" id="pe-photo-desc"></textarea></div>
                        <div class="form-field"><label class="form-field__label">–§–æ—Ä–º–∞—Ç</label>
                            <select class="admin-select" id="pe-photo-format">
                                <option value="auto">üìê –ê–≤—Ç–æ</option>
                                <option value="square">‚¨ú –ö–≤–∞–¥—Ä–∞—Ç</option>
                                <option value="landscape">üñº –ê–ª—å–±–æ–º–Ω–∞—è</option>
                                <option value="portrait">üì± –ü–æ—Ä—Ç—Ä–µ—Ç</option>
                                <option value="wide">üñ• –®–∏—Ä–æ–∫–∞—è</option>
                            </select>
                        </div>
                    </div>
                    <!-- Extra files -->
                    <div class="form-row form-row--full" id="pe-extra-files"></div>
                </div>
            </div>
            <div class="admin-modal__footer">
                <button class="admin-btn" onclick="AdminApp.closeModal('edit-photo-modal')">–û—Ç–º–µ–Ω–∞</button>
                <button class="admin-btn admin-btn--primary" id="pe-save-btn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- ATTACH WORKS MODAL -->
    <div class="admin-modal" id="attach-works-modal">
        <div class="admin-modal__backdrop" onclick="AdminApp.closeModal('attach-works-modal')"></div>
        <div class="admin-modal__container" style="max-width:750px;">
            <div class="admin-modal__header">
                <h3 class="admin-modal__title">üìé –ü—Ä–∏–≤—è–∑–∞—Ç—å —Ä–∞–±–æ—Ç—ã ‚Äî <span id="attach-works-member-name"></span></h3>
                <button class="admin-modal__close" onclick="AdminApp.closeModal('attach-works-modal')">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                </button>
            </div>
            <div class="admin-modal__body" style="max-height:60vh;overflow-y:auto;">
                <p style="font-size:0.85rem;color:#6b7280;margin-bottom:16px;">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ç–æ, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç —ç—Ç–æ–º—É —É—á–∞—Å—Ç–Ω–∏–∫—É.</p>
                <div id="attach-works-grid"></div>
            </div>
            <div class="admin-modal__footer">
                <button class="admin-btn" onclick="AdminApp.closeModal('attach-works-modal')">–û—Ç–º–µ–Ω–∞</button>
                <button class="admin-btn admin-btn--primary" id="attach-works-save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <script src="js/theme-switcher.js"></script>
    <script src="js/admin-store.js"></script>
    <script src="js/admin.js"></script>

    <!-- Unsaved changes warning (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ #9) -->
    <script>
        window.addEventListener('beforeunload', function(e) {
            const unsaved = document.getElementById('topbar-unsaved');
            if (unsaved && unsaved.classList.contains('visible')) {
                e.preventDefault();
                e.returnValue = '–£ –≤–∞—Å –µ—Å—Ç—å –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è!';
            }
        });
    </script>
</body>
</html>